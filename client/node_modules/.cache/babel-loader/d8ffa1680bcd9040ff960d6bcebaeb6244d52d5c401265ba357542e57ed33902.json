{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport jwtDecode from 'jwt-decode';\nimport axios from 'axios';\nimport { useAuthContext } from './useAuthContext';\nimport { useToastMessage } from '../context/Toast';\nexport const useEditUser = () => {\n  _s();\n  // usestate\n  const [spinner, setSpinner] = useState(false);\n  const [id, setID] = useState('');\n  const {\n    successMessage,\n    errorMessage\n  } = useToastMessage();\n  const {\n    dispatch\n  } = useAuthContext();\n  useEffect(() => {\n    const token = JSON.parse(localStorage.getItem('user'));\n    if (token) {\n      try {\n        const decodedToken = jwtDecode(token.token);\n        console.log(decodedToken._id);\n        setID(decodedToken._id);\n      } catch (error) {\n        console.log('Error decoding token:', error);\n      }\n    }\n  }, []);\n  const editProfiles = async (name, email, password) => {\n    const url = `http://localhost:3000/user/update/${id}`;\n    const data = {\n      name: name,\n      email: email,\n      password: password\n    };\n    console.log(data);\n    if (name || email || password) {\n      try {\n        const response = await axios.patch(url, data, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('user')}`\n          }\n        });\n        if (response.status === 200) {\n          setSpinner(true);\n          setTimeout(() => {\n            successMessage('Profile updated successfully');\n          }, 500);\n          setTimeout(() => {\n            setSpinner(false);\n          }, 1000);\n          dispatch({\n            type: 'Login',\n            payload: response.data\n          });\n          console.log(response.data);\n        } else {\n          throw new Error('There has been a problem updating your profile');\n        }\n      } catch (error) {\n        errorMessage(error.message);\n        setSpinner(false);\n      }\n    } else {\n      errorMessage('Please enter your details');\n    }\n  };\n  return {\n    editProfiles,\n    spinner\n  };\n};\n_s(useEditUser, \"9LpxqbW+Vq68Ymye5VPTIozh1Jk=\", false, function () {\n  return [useToastMessage, useAuthContext];\n});","map":{"version":3,"names":["useState","useEffect","jwtDecode","axios","useAuthContext","useToastMessage","useEditUser","spinner","setSpinner","id","setID","successMessage","errorMessage","dispatch","token","JSON","parse","localStorage","getItem","decodedToken","console","log","_id","error","editProfiles","name","email","password","url","data","response","patch","headers","Authorization","status","setTimeout","type","payload","Error","message"],"sources":["/Users/doheelee/Desktop/my-blog/client/src/hooks/useEditUser.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport jwtDecode from 'jwt-decode'\nimport axios from 'axios'\nimport { useAuthContext } from './useAuthContext'\n\nimport { useToastMessage } from '../context/Toast'\n\nexport const useEditUser = () => {\n  // usestate\n  const [spinner, setSpinner] = useState(false)\n  const [id, setID] = useState('')\n\n  const { successMessage, errorMessage } = useToastMessage()\n  const { dispatch } = useAuthContext()\n\n  useEffect(() => {\n    const token = JSON.parse(localStorage.getItem('user'))\n\n    if (token) {\n      try {\n        const decodedToken = jwtDecode(token.token)\n        console.log(decodedToken._id)\n        setID(decodedToken._id)\n      } catch (error) {\n        console.log('Error decoding token:', error)\n      }\n    }\n  }, [])\n\n  const editProfiles = async (name, email, password) => {\n    const url = `http://localhost:3000/user/update/${id}`\n    const data = {\n      name: name,\n      email: email,\n      password: password,\n    }\n    console.log(data)\n    if (name || email || password) {\n      try {\n        const response = await axios.patch(url, data, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('user')}`,\n          },\n        })\n        if (response.status === 200) {\n          setSpinner(true)\n\n          setTimeout(() => {\n            successMessage('Profile updated successfully')\n          }, 500)\n\n          setTimeout(() => {\n            setSpinner(false)\n          }, 1000)\n\n          dispatch({ type: 'Login', payload: response.data })\n          console.log(response.data)\n        } else {\n          throw new Error('There has been a problem updating your profile')\n        }\n      } catch (error) {\n        errorMessage(error.message)\n        setSpinner(false)\n      }\n    } else {\n      errorMessage('Please enter your details')\n    }\n  }\n  return { editProfiles, spinner }\n}\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,cAAc,QAAQ,kBAAkB;AAEjD,SAASC,eAAe,QAAQ,kBAAkB;AAElD,OAAO,MAAMC,WAAW,GAAG,MAAM;EAAA;EAC/B;EACA,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACS,EAAE,EAAEC,KAAK,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAEhC,MAAM;IAAEW,cAAc;IAAEC;EAAa,CAAC,GAAGP,eAAe,EAAE;EAC1D,MAAM;IAAEQ;EAAS,CAAC,GAAGT,cAAc,EAAE;EAErCH,SAAS,CAAC,MAAM;IACd,MAAMa,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;IAEtD,IAAIJ,KAAK,EAAE;MACT,IAAI;QACF,MAAMK,YAAY,GAAGjB,SAAS,CAACY,KAAK,CAACA,KAAK,CAAC;QAC3CM,OAAO,CAACC,GAAG,CAACF,YAAY,CAACG,GAAG,CAAC;QAC7BZ,KAAK,CAACS,YAAY,CAACG,GAAG,CAAC;MACzB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdH,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEE,KAAK,CAAC;MAC7C;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,YAAY,GAAG,OAAOC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,KAAK;IACpD,MAAMC,GAAG,GAAI,qCAAoCnB,EAAG,EAAC;IACrD,MAAMoB,IAAI,GAAG;MACXJ,IAAI,EAAEA,IAAI;MACVC,KAAK,EAAEA,KAAK;MACZC,QAAQ,EAAEA;IACZ,CAAC;IACDP,OAAO,CAACC,GAAG,CAACQ,IAAI,CAAC;IACjB,IAAIJ,IAAI,IAAIC,KAAK,IAAIC,QAAQ,EAAE;MAC7B,IAAI;QACF,MAAMG,QAAQ,GAAG,MAAM3B,KAAK,CAAC4B,KAAK,CAACH,GAAG,EAAEC,IAAI,EAAE;UAC5CG,OAAO,EAAE;YACPC,aAAa,EAAG,UAAShB,YAAY,CAACC,OAAO,CAAC,MAAM,CAAE;UACxD;QACF,CAAC,CAAC;QACF,IAAIY,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;UAC3B1B,UAAU,CAAC,IAAI,CAAC;UAEhB2B,UAAU,CAAC,MAAM;YACfxB,cAAc,CAAC,8BAA8B,CAAC;UAChD,CAAC,EAAE,GAAG,CAAC;UAEPwB,UAAU,CAAC,MAAM;YACf3B,UAAU,CAAC,KAAK,CAAC;UACnB,CAAC,EAAE,IAAI,CAAC;UAERK,QAAQ,CAAC;YAAEuB,IAAI,EAAE,OAAO;YAAEC,OAAO,EAAEP,QAAQ,CAACD;UAAK,CAAC,CAAC;UACnDT,OAAO,CAACC,GAAG,CAACS,QAAQ,CAACD,IAAI,CAAC;QAC5B,CAAC,MAAM;UACL,MAAM,IAAIS,KAAK,CAAC,gDAAgD,CAAC;QACnE;MACF,CAAC,CAAC,OAAOf,KAAK,EAAE;QACdX,YAAY,CAACW,KAAK,CAACgB,OAAO,CAAC;QAC3B/B,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,MAAM;MACLI,YAAY,CAAC,2BAA2B,CAAC;IAC3C;EACF,CAAC;EACD,OAAO;IAAEY,YAAY;IAAEjB;EAAQ,CAAC;AAClC,CAAC;AAAA,GA9DYD,WAAW;EAAA,QAKmBD,eAAe,EACnCD,cAAc;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}